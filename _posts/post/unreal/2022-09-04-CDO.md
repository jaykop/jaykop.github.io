---
title: "Unreal Object"
classes: wide
categories: 
  - post
  - Unreal
sidebar:
  nav: "main"
author_profile: true
---

## UObject
* 오브젝트의 베이스 클래스
  * 언리얼 엔진의 관리를 받는, 효율적으로 관리하기 위해 고안된 특수한 객체
* UCLASS 매크로를 통해 UObject 처리 시스템이 인식
  * UE에서 제공하는 GC의 관리를 받을 수 있다
  * UCLASS의 레퍼런스를 UObject에게 넘겨준다?
* 모든 언리얼 오브젝트는 실행 초기의 런타임 과정에서 다음 두가지를 생성한다
  * UClass 인스턴스
  * CDO

### UCLASS
* 언리얼 오브젝트에 대한 계층 구조, 멤버 변수, 함수, 정보 등을 기록한다
  * 이른바 메타 정보
* 이 매크로를 선언함으로써 스크립트에 접근해 정보를 찾아 열람하고 사용할수 있다는 뜻
* 런타임에 특정 클래스를 검색해 타입을 알아내고, 인스턴스의 멤버 변수 값을 변경하거나 특정 인스턴스의 멤버 함수를 호출하는 것이 가능
  * 리플렉션 같은 거라고 생각하면 될 듯?
* UCLASS는 CDO라고 불리는 오브젝트를 하나 유지한다

### Class Default Object
* 언리얼 오브젝트의 기본 세팅 상태를 지정
  * 기본 탬플릿 오브젝트
* 클래스 생성자에 의해 생성된 이후 변경되지 않는다
  * 언리얼 오브젝트를 생성할 때마다 매번 초기화하지 않고, 기본 인스턴스(CDO)를 미리 만든 후 이를 복제해서 사용
  * 따라서 생성자 코드는 초기화에서만 1번 실행되고, 다른 객체에서 필요한 초기화 코드는 BeginPlay에서 실행하는 것을 권장
* 실제 생성자에 작성한 코드는 CDO 프로퍼티를 초기화하는 데 사용한다

### 왜 CDO를 사용하는가?
* 동일한 class의 여러 객체를 생성한다고 가정할 때,
  * 생성자를 호출해 초기화 한 뒤 속성 값을 변경하는 방법
  * 기본 객체를 복제한 후 속성 값을 변경하는 방법
* 더 상세한 정보는 찾을 수 없지만, 후자의 방법(CDO)를 사용하는 방법이 어쨌든 더 효율적이라는 것 같다
  * 내가 아는 복제 방법은 새로운 메모리를 할당하면서 기본 생성자이든 복사 생성자이든 호출하는 건데...다른 방법이 있나보다

## 출처
* <https://docs.unrealengine.com/4.27/ko/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/Objects/>
* <https://mm5-gnap.tistory.com/360>
* <https://swifter22.tistory.com/14>
* <https://devjino.tistory.com/246>
* <https://kyoun.tistory.com/125>
* <https://dlemrcnd.tistory.com/99>