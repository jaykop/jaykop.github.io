---
title: "Struct vs. Class"
classes: wide
categories: 
  - post
  - CSharp
sidebar:
  nav: "main"
author_profile: true
---
   
## Struct 
* 값 타입
* allocation 및 deallocation 시 참조 타입보다 소요가 적다
* stack에 저장
  * nested struct 구조인 경우 inline

```csharp
struct Inner
{
    public int A;
}

struct Outer
{
    public Inner I;
    public int B;
}

Outer o = new Outer();
o.I = new Inner();
```

### struct의 제약
* 일반적으로, 함수 인자로 전달되거나 함수에서 반환할 때 복사된다
  * 참조 인자 전달은 ref 키워드를 이용해 가능하다
  * 최신 C# 역시 참조 반환을 허용한다
* 같은 구조체를 가리키는 여러 개의 변수를 선언할 수 없다

## Class
* 참조 타입
* Heap에 저장
  * garbage-collected 된다
* 멤버 변수가 많고 클수록 할당하는 데 struct보다 유리하다
* 두 변수가 하나의 동일한 참조를 할 수 있다

## 각 케이스 별 저장되는 위치
1. Main 함수에 선언된 int -> stack
2. Class 안에 선언된 int -> Heap
3. 함수에 인수로 전달된 int -> Stack
  * 함수에 인수로 전달된 class 
    * Stack에 original data에 대한 참조가 있디
    * Heap에 original data가 있다
4. 함수에 지역 변수로 선언된 int -> Stack
  * Boxing된 int라면 -> Heap
5. Class 안에 선언된 Struct -> Heap
  * Struct 안에 선언된 Class -> Heap
6. ref struct -> Stack

## 출처
* <https://www.c-sharpcorner.com/blogs/difference-between-struct-and-class-in-c-sharp>
* <https://kukuta.tistory.com/385>
* <https://stackoverflow.com/questions/10358496/what-does-allocated-inline-in-a-structure-mean-for-value-types>
* <https://bigexecution.tistory.com/m/83>
* <https://stackoverflow.com/questions/57173978/are-these-method-parameters-stored-on-stack-or-heap>
* <https://stackoverflow.com/questions/22353070/ref-parameters-stack-or-heap>